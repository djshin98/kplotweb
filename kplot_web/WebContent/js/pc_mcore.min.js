
var M = {
		plugin : function( pluginname ){
			if( pluginname == 'location' ){
				return M.plugin_location;
			}
			
		},
		sys : {
			exit : function(){
				M.page.html("login.html");
			}
		},
		apps : {
			open : function ( url , param ){
				window.open( url );
			},
		},
		net : {
			http : {
				send : function( jvar ){
					$.ajax({
						url : 'ajax.do',
						type : jvar.method,
						data: JSON.stringify( jvar.data ),
					    processData: false,
					    contentType: "application/json; charset=utf-8",
						success : function(data) {
							jvar.onSuccess( data , {} );
						},
						error : function(httpReq, status, exception) {
							jvar.onError( {} , {} );
						}
					});
					
					//alert( JSON.stringify(jvar.data) );
					//jvar.onSuccess({result:'FAIL', resultMessage:'none'},{});
				}
			}
		},
		data : {
			map : new Object(),
			global : function( key , val ){
				if( val == undefined ){
					if( key == 'device-key' ){
						return '356428052754317';
					}
					//return M.data.map[key];
					return $.jStorage.get(key);
				}else{
					M.data.map[key] = val;
					$.jStorage.set(key,val);
				}
			},
			storage : function( obj ){
				if( obj == undefined ){
					return $.jStorage.get('storage');
				}else{
					$.jStorage.set('storage',obj);
				}
			}
		
		},
		page : {
			back : function(){
				
			},
			html : function( url ){
				window.location.href = url;
			}
		},
		tool : {
			log : function( ){
				
			}
		},
		onReady : function( afunc ){
			afunc();
		},
		onBack : function( afunc ){
			afunc();
		},
		onKey : function( afunc ){
			afunc();
		},
		info :{
			device : function(){
				return {
					os : {
						name : "android",
						version : "6"
					},
					id : '333',
					model : 'android'
				}
			}
		},
		plugin_location : {
			current : function( jsobj ){
				var result = {
						coords : {
							longitude : 123.456,
							latitude : 34.334455
						}
				};
				jsobj.on( result );
			}
		}
};

function WN2Common( func , data ){
	if( func == 'getToken' ){
		return 'Xp8C7CLbNVg:APA91bHwQET7_Q0Nb910jfj5lQR1pagDf7NrNktJdJDjc8V8orLidDE_GhR8TYk_gDYqXI5gcjX2w664hf07qKuzwZrkrgltHQ6MuT';
	}
	return "OK";
}